/* eslint-env node, mocha */
'use strict'
var chai = require('chai')
var expect = chai.expect
var le = require('../../dist/lib/logentries')
var Faker = require('faker')
var stream = require('stream')
var Writable = stream.Writable

describe('logentries', function () {
  var token = null
  beforeEach(function () {
    token = Faker.random.uuid()
  })

  afterEach(function () {
  })

  it('should export getLogEntriesBunyanStream', function () {
    expect(le.getLogEntriesBunyanStream).to.be.a('function')
  })
  it('should require options', function () {
    expect(() => le.getLogEntriesBunyanStream())
      .to.throw(TypeError)
  })
  it('should return a bunyan stream', function () {
    var result = le.getLogEntriesBunyanStream({ token })
    expect(result).to.have.property('stream')
    expect(result.stream).to.be.instanceOf(Writable, 'implements Writable')
  })
})
